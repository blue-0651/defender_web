# DEFENDER PROJECT API ì‚¬ìš© ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” DEFENDER PROJECTì˜ ë°±ì—”ë“œ APIë¥¼ Postmanìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ”§ Postman ì„¤ì •

### 1. ì»¬ë ‰ì…˜ ê°€ì ¸ì˜¤ê¸°
1. Postman ì‹¤í–‰
2. `Import` ë²„íŠ¼ í´ë¦­
3. `DEFENDER_PROJECT_API_Collection.postman_collection.json` íŒŒì¼ ì„ íƒ
4. ê°€ì ¸ì˜¤ê¸° ì™„ë£Œ

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ì»¬ë ‰ì…˜ì— í¬í•¨ëœ ë³€ìˆ˜ë“¤:
- `base_url`: `http://3.38.245.204:8000` (ê°œë°œì„œë²„)
- `local_url`: `http://127.0.0.1:8000` (ë¡œì»¬ì„œë²„)
- `token`: `defender0651` (ê³ ì • ì¸ì¦ í† í°)
- `user_id`: ì‚¬ìš©ì ID
- `client_id`: ê³ ê° ID
- `announcement_id`: ê³µì§€ì‚¬í•­ ID

## ğŸš€ API ì‚¬ìš© ìˆœì„œ

### 1ë‹¨ê³„: ì‚¬ìš©ì ìƒì„± ë° ë¡œê·¸ì¸

#### 1-1. ì‚¬ìš©ì ìƒì„± (íšŒì›ê°€ì…)
```
POST /api/users/create/
Content-Type: multipart/form-data

í•„ìˆ˜ í•„ë“œ:
- id: ì‚¬ìš©ì ID (ì˜ˆ: "store001")
- pw: ë¹„ë°€ë²ˆí˜¸ (ì˜ˆ: "store123!")
- email: ì´ë©”ì¼ (ì˜ˆ: "store001@example.com")
- store_name: ë§¤ì¥ëª… (ì˜ˆ: "ë‹¤ì´ì†Œ ê°•ë‚¨ì ")
- phone_number: ì „í™”ë²ˆí˜¸ (ì˜ˆ: "010-1234-5678")
- isAdmin: ê´€ë¦¬ì ì—¬ë¶€ (true/false)
- business_license_image: ì‚¬ì—…ìë“±ë¡ì¦ ì´ë¯¸ì§€ (íŒŒì¼)
```

**ìƒ˜í”Œ ìš”ì²­:**
```
id: store001
pw: store123!
email: store001@example.com
store_name: ë‹¤ì´ì†Œ ê°•ë‚¨ì 
phone_number: 010-1234-5678
isAdmin: false
business_license_image: [íŒŒì¼ ì—…ë¡œë“œ]
```

#### 1-2. ë¡œê·¸ì¸
```
POST /api/users/login/
Content-Type: application/json

{
  "id": "admin",
  "pw": "admin123"
}
```

**ìƒ˜í”Œ ê³„ì •:**
- ê´€ë¦¬ì: `id: "admin", pw: "admin123"`
- ë§¤ì¥: `id: "store001", pw: "store123!"`

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "resultCode": "20",
  "message": "ë¡œê·¸ì¸ ì„±ê³µ",
  "data": {
    "id": "admin",
    "email": "admin@example.com",
    "store_name": "ê´€ë¦¬ì ë§¤ì¥",
    "isAdmin": true,
    "search_count": 1000,
    "usage_start_date": "2024-01-01",
    "usage_end_date": "2024-12-31",
    "business_license_image": "/media/licenseImage/admin_license.jpg"
  }
}
```

### 2ë‹¨ê³„: ì¸ì¦ í† í° ì„¤ì •
ì´ ì‹œìŠ¤í…œì€ **ê³ ì • Bearer Token**ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- í† í° ê°’: `defender0651`
- ì´ë¯¸ Postman í™˜ê²½ ë³€ìˆ˜ `token`ì— ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
- ë¡œê·¸ì¸ì€ ì‚¬ìš©ì ì •ë³´ í™•ì¸ìš©ì´ë©°, ë³„ë„ í† í°ì„ ë°œê¸‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### 3ë‹¨ê³„: ê³ ê° ê´€ë¦¬

#### 3-1. ê³ ê° ì €ì¥
```
POST /api/clients/save/
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "nickName": "í™ê¸¸ë™123",
  "phoneNumber": "010-9876-5432",
  "name": "í™ê¸¸ë™",
  "address": "ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
  "memo": "ë‹¨ê³¨ê³ ê°, ë§¤ì›” ì •ê¸°ì£¼ë¬¸",
  "isBadClient": false,
  "userId": "store001"
}
```

**í•„ë“œ ì„¤ëª…:**
- `nickName`: ê³ ìœ í•œ ê³ ê° ì‹ë³„ì (ì¤‘ë³µ ë¶ˆê°€)
- `phoneNumber`: ì•”í˜¸í™”ë˜ì–´ ì €ì¥ë¨
- `name`: ê³ ê° ì‹¤ëª… (ì„ íƒì‚¬í•­)
- `address`: ì£¼ì†Œ ì •ë³´ (ì„ íƒì‚¬í•­)
- `memo`: ê³ ê° ê´€ë ¨ ë©”ëª¨ (ì„ íƒì‚¬í•­)
- `isBadClient`: ë¶ˆëŸ‰ê³ ê° ì—¬ë¶€ (ê¸°ë³¸ê°’: false)
- `userId`: ë“±ë¡í•˜ëŠ” ë§¤ì¥ ì‚¬ìš©ì ID

#### 3-2. ë¶ˆëŸ‰ê³ ê° ì²´í¬
```
POST /api/clients/check-bad-client/
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "phoneNumber": "010-9876-5432",
  "userId": "store001"
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "resultCode": "20",
  "message": "ë¶ˆëŸ‰ê³ ê°ì…ë‹ˆë‹¤.",
  "data": {
    "isBadClient": true,
    "clientInfo": {
      "nickName": "í™ê¸¸ë™123",
      "name": "í™ê¸¸ë™",
      "memo": "ê²°ì œ ì§€ì—° ì´ë ¥ ìˆìŒ",
      "registeredBy": "store002",
      "store_name": "ë‹¤ì´ì†Œ ì—­ì‚¼ì "
    }
  }
}
```

## ğŸ“Š ì‘ë‹µ ì½”ë“œ ì„¤ëª…

| resultCode | ì˜ë¯¸ | ì„¤ëª… |
|------------|------|------|
| "20" | ì„±ê³µ | ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì²˜ë¦¬ë¨ |
| "30" | ì¤‘ë³µ | ë°ì´í„° ì¤‘ë³µ (ì˜ˆ: ë‹‰ë„¤ì„ ì¤‘ë³µ) |
| "40" | ì‹¤íŒ¨ | ìš”ì²­ ì‹¤íŒ¨ ë˜ëŠ” ì˜¤ë¥˜ |

## ğŸ” ì¸ì¦ ë°©ì‹

### Bearer Token ì¸ì¦ (ê³ ì • í† í°)
ëª¨ë“  API ìš”ì²­ ì‹œ í—¤ë”ì— í¬í•¨:
```
Authorization: Bearer defender0651
```

**ì¤‘ìš”:** ì´ ì‹œìŠ¤í…œì€ ê³ ì •ëœ Bearer Tokenì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- í† í° ê°’: `defender0651`
- ë¡œê·¸ì¸ APIëŠ” ì‚¬ìš©ì ì •ë³´ í™•ì¸ìš©ì´ë©°, í† í°ì„ ë°œê¸‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
- ëª¨ë“  ì¸ì¦ì´ í•„ìš”í•œ APIì—ëŠ” ìœ„ í† í°ì„ ì‚¬ìš©í•˜ì„¸ìš”.

## ğŸ“ ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

### ì‚¬ìš©ì ê´€ë¦¬
- `POST /api/users/login/` - ë¡œê·¸ì¸
- `POST /api/users/create/` - ì‚¬ìš©ì ìƒì„±
- `POST /api/users/read/` - ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ
- `PUT /api/users/{id}/update/` - ì‚¬ìš©ì ì •ë³´ ìˆ˜ì •
- `DELETE /api/users/{id}/delete/` - ì‚¬ìš©ì ì‚­ì œ (IDë¡œ)
- `DELETE /api/users/email/{email}/delete/` - ì‚¬ìš©ì ì‚­ì œ (ì´ë©”ì¼ë¡œ)
- `PUT /api/users/update-password/` - ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
- `POST /api/users/{id}/adjust-search-count/` - ê²€ìƒ‰ íšŸìˆ˜ ì¡°ì •
- `POST /api/users/{id}/set-usage-period/` - ì‚¬ìš© ê¸°ê°„ ì„¤ì •
- `GET /api/users/{id}/check-status/` - ì‚¬ìš©ì ìƒíƒœ í™•ì¸

### ê³ ê° ê´€ë¦¬
- `POST /api/clients/save/` - ê³ ê° ì €ì¥
- `POST /api/clients/list/` - ê³ ê° ëª©ë¡ ì¡°íšŒ
- `PUT /api/clients/{id}/update/` - ê³ ê° ì •ë³´ ìˆ˜ì •
- `DELETE /api/clients/{id}/delete/` - ê³ ê° ì‚­ì œ
- `POST /api/clients/search/` - ê³ ê° ê²€ìƒ‰
- `POST /api/clients/search-by-phone/` - ì „í™”ë²ˆí˜¸ë¡œ ê³ ê° ê²€ìƒ‰
- `POST /api/clients/check-bad-client/` - ë¶ˆëŸ‰ê³ ê° ì²´í¬
- `POST /api/clients/get-by-nickname/` - ë‹‰ë„¤ì„ìœ¼ë¡œ ê³ ê° ì¡°íšŒ
- `POST /api/clients/check-nickname/` - ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸
- `POST /api/clients/search-phone-and-decrease/` - ì „í™”ë²ˆí˜¸ ê²€ìƒ‰ ë° íšŸìˆ˜ ì°¨ê°

### ê³µì§€ì‚¬í•­ ê´€ë¦¬
- `POST /api/announce/save/` - ê³µì§€ì‚¬í•­ ì €ì¥
- `POST /api/announce/list/` - ê³µì§€ì‚¬í•­ ëª©ë¡ ì¡°íšŒ
- `PUT /api/announce/{id}/update/` - ê³µì§€ì‚¬í•­ ìˆ˜ì •
- `DELETE /api/announce/{id}/delete/` - ê³µì§€ì‚¬í•­ ì‚­ì œ

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í”Œë¡œìš°
1. **ì‚¬ìš©ì ìƒì„±** â†’ ìƒˆ ê³„ì • ìƒì„±
   ```
   id: store001, pw: store123!, email: store001@example.com
   store_name: ë‹¤ì´ì†Œ ê°•ë‚¨ì , phone_number: 010-1234-5678
   ```

2. **ë¡œê·¸ì¸** â†’ ì‚¬ìš©ì ì •ë³´ í™•ì¸ (í† í°ì€ ì´ë¯¸ ì„¤ì •ë¨)
   ```
   id: store001, pw: store123!
   ```

3. **ê³ ê° ì €ì¥** â†’ ìƒˆ ê³ ê° ì •ë³´ ë“±ë¡
   ```
   nickName: í™ê¸¸ë™123, phoneNumber: 010-9876-5432
   name: í™ê¸¸ë™, userId: store001
   ```

4. **ë¶ˆëŸ‰ê³ ê° ì²´í¬** â†’ ì „í™”ë²ˆí˜¸ë¡œ ë¶ˆëŸ‰ê³ ê° ì—¬ë¶€ í™•ì¸
   ```
   phoneNumber: 010-9876-5432, userId: store001
   ```

5. **ê³ ê° ê²€ìƒ‰** â†’ ë“±ë¡ëœ ê³ ê° ì •ë³´ ê²€ìƒ‰
   ```
   keyword: í™ê¸¸ë™, userId: store001
   ```

6. **ê³µì§€ì‚¬í•­ ê´€ë¦¬** â†’ ê³µì§€ì‚¬í•­ CRUD í…ŒìŠ¤íŠ¸
   ```
   title: ì‹œìŠ¤í…œ ì ê²€ ì•ˆë‚´, userId: admin
   ```

### ê³ ê¸‰ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### 1. ì¤‘ë³µ ë°ì´í„° í…ŒìŠ¤íŠ¸
- **ë‹‰ë„¤ì„ ì¤‘ë³µ**: ê°™ì€ `nickName`ìœ¼ë¡œ ê³ ê° ë“±ë¡ ì‹œë„
  ```json
  ì‘ë‹µ: {"resultCode": "30", "message": "ì•„ì´ë””ê°€ ì´ë¯¸ ì¡´ì¬í•©ë‹ˆë‹¤."}
  ```

- **ì „í™”ë²ˆí˜¸ ì¤‘ë³µ**: ê°™ì€ ë§¤ì¥ì—ì„œ ë™ì¼ ì „í™”ë²ˆí˜¸ ë“±ë¡ ì‹œ ê¸°ì¡´ ì •ë³´ ì—…ë°ì´íŠ¸

#### 2. ê¶Œí•œ í…ŒìŠ¤íŠ¸
- ë‹¤ë¥¸ ì‚¬ìš©ìì˜ ê³ ê° ì •ë³´ ìˆ˜ì •/ì‚­ì œ ì‹œë„
- ë§¤ì¥ ì†Œìœ ìê°€ ì•„ë‹Œ ê³ ê° ì •ë³´ ì ‘ê·¼ ì‹œë„

#### 3. ê²€ìƒ‰ íšŸìˆ˜ ì œí•œ í…ŒìŠ¤íŠ¸
- `search-phone-and-decrease` APIë¡œ ê²€ìƒ‰ íšŸìˆ˜ ì°¨ê° í™•ì¸
- ê²€ìƒ‰ íšŸìˆ˜ 0ì¼ ë•Œ API í˜¸ì¶œ ê²°ê³¼ í™•ì¸

#### 4. ì‚¬ìš© ê¸°ê°„ ë§Œë£Œ í…ŒìŠ¤íŠ¸
- `usage_end_date`ê°€ ì§€ë‚œ ê³„ì •ìœ¼ë¡œ API í˜¸ì¶œ
- ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‚¬ìš© ê¸°ê°„ ì—°ì¥ í…ŒìŠ¤íŠ¸

## ğŸš¨ ì£¼ì˜ì‚¬í•­

1. **íŒŒì¼ ì—…ë¡œë“œ**: ì‚¬ìš©ì ìƒì„± ì‹œ `business_license_image`ëŠ” ì‹¤ì œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì•¼ í•©ë‹ˆë‹¤.
2. **ì „í™”ë²ˆí˜¸ ì•”í˜¸í™”**: ì „í™”ë²ˆí˜¸ëŠ” ì„œë²„ì—ì„œ ìë™ìœ¼ë¡œ ì•”í˜¸í™”ë˜ì–´ ì €ì¥ë©ë‹ˆë‹¤.
3. **ê²€ìƒ‰ íšŸìˆ˜ ì œí•œ**: ì‚¬ìš©ìë³„ë¡œ ê²€ìƒ‰ íšŸìˆ˜ê°€ ì œí•œë˜ì–´ ìˆìŠµë‹ˆë‹¤.
4. **ì‚¬ìš© ê¸°ê°„**: ì‚¬ìš©ìë³„ë¡œ ì„œë¹„ìŠ¤ ì´ìš© ê¸°ê°„ì´ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸ” ë””ë²„ê¹… íŒ

1. **ì‘ë‹µ í™•ì¸**: ëª¨ë“  ì‘ë‹µì—ëŠ” `resultCode`, `message`, `data` í•„ë“œê°€ í¬í•¨ë©ë‹ˆë‹¤.
2. **ë¡œê·¸ í™•ì¸**: ì„œë²„ ë¡œê·¸ì—ì„œ ìš”ì²­/ì‘ë‹µ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
3. **ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜**: ì„œë²„ ì—°ê²° ì‹¤íŒ¨ ì‹œ `base_url` ë³€ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”.
4. **ì¸ì¦ ì˜¤ë¥˜**: í† í°ì´ `defender0651`ë¡œ ì •í™•íˆ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

## ğŸ“ ë¬¸ì˜ì‚¬í•­

API ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ê°œë°œíŒ€ì— ë¬¸ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025ë…„ 3ì›” 22ì¼ 